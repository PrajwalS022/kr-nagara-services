<!DOCTYPE html>
<html>
<head>
    <title>Chicken Bill</title>
    <style>
        body { font-family: Arial; text-align: center; }
        h2 { color: green; }
        textarea, button {
            width: 80%;
            margin: 10px auto;
        }
    </style>
</head>
<body>
    <h2>Chicken Order Summary</h2>
    <p id="line1"></p>
    <p>Delivery charge: â‚¹10</p>
    <p>Taxes: â‚¹3</p>
    <p id="line4"></p>

    <label><strong>Optional: Type your address</strong></label><br>
    <textarea id="address" placeholder="Type address or landmark..."></textarea><br>

    <button onclick="useLocation()">ğŸ“ Use My Location</button><br><br>

    <button onclick="sendOrder()">NEXT</button>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const kg = parseFloat(urlParams.get('kg'));
        const pricePerKg = 200;

        const total1 = kg * pricePerKg;
        const delivery = 10;
        const taxes = 3;
        const total = total1 + delivery + taxes;

        document.getElementById('line1').innerText = `Chicken: ${kg} kg Ã— â‚¹${pricePerKg} = â‚¹${total1}`;
        document.getElementById('line4').innerText = `Total: â‚¹${total}`;

        let gpsLink = "";

        function useLocation() {
            if (!navigator.geolocation) {
                alert("Geolocation is not supported by your browser");
                return;
            }

            navigator.geolocation.getCurrentPosition(position => {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;
                gpsLink = `https://maps.google.com/?q=${lat},${lon}`;
                alert("Location added! You can now click NEXT to place order.");
            }, () => {
                alert("Unable to get your location. Please allow location access.");
            });
        }

        function sendOrder() {
            const address = document.getElementById('address').value;
            if (address === "" && gpsLink === "") {
                alert("Please enter address or use location.");
                return;
            }

            const message = encodeURIComponent(
                `ğŸ›’ New Chicken Order\n` +
                `----------------------\n` +
                `ğŸ“¦ Quantity: ${kg} kg\n` +
                `ğŸ’° Total: â‚¹${total}\n` +
                `ğŸ“ Address: ${address || ''}\n` +
                (gpsLink ? `ğŸŒ Location: ${gpsLink}` : '') +
                `\nâœ… Please confirm the order.`
            );

            const ownerNumber = "919900754753";
            const whatsappLink = `https://wa.me/${ownerNumber}?text=${message}`;
            window.location.href = whatsappLink;
        }
    </script>
</body>
</html>
